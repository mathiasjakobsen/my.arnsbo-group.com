<!doctype html>
<html>
  <head>
    <title>Set new password - Bitrix24</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://js.sentry-cdn.com/de8ba25272a0e314d60c4ebad5757ccb.min.js" crossorigin="anonymous"></script>
    <script>
      Sentry.onLoad(function() {
        Sentry.init({
          tracesSampleRate: 1.0,
          initialScope: {
            user: { email: (new URLSearchParams(window.location.search)).get('t') }
          },
        });
      });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LB0L38GS8H"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LB0L38GS8H');
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              blue: '#2fc6f7',
              orange: '#ff5800',
            }
          }
        }
      }
    </script>
  </head>
  <body class="absolute h-full w-full bg-blue flex flex-col">
    <div class="grow-0 flex justify-center py-20">
        <img src="./bitrix24.svg" />
    </div>
    <div class="flex justify-center items-center">
      <div class="bg-white p-10 rounded rounded-xl flex flex-col space-y-8">
        <h1 class="text-3xl font text-gray-700">
          Set new password for <span id="email"></span>
        </h1>

        <div class="bg-gray-100 rounded rounded-full p-4 flex justify-center">
          <div class="w-10 h-10 bg-orange rounded-full p-1">
            <img src="./office-365.svg" />
          </div>
        </div>

        <form class="flex flex-col space-y-4">
          <label class="text-xl text-gray-400 w-96">Previous password</label>
          <input class="px-2 py-3 border-2 border-gray-300 focus:border-blue focus:ring-0 ring-blue focus:outline-none" type="password" name="po" required>

          <label class="text-xl text-gray-400">New password</label>
          <input class="px-2 py-3 border-2 border-gray-300 focus:border-blue focus:ring-0 ring-blue focus:outline-none" type="password" name="pn" required>

          <label class="text-xl text-gray-400">Repeat new password</label>
          <input class="px-2 py-3 border-2 border-gray-300 focus:border-blue focus:ring-0 ring-blue focus:outline-none" type="password" name="pnr" required>

          <div class="flex justify-center pt-6">
            <button class="bg-blue px-8 py-3 rounded-full text-gray-100" type="submit">Set new password</button>
          </div>
        </form>
      </div>
    </div>

    <div class="grow-0 flex justify-center py-8">
      <p class="text-sm font-medium" style="color: #005e94;">
        Â© 2001-2024 Bitrix24
      </p>
    </div>

    <script>
      (function() {
        var params = new URLSearchParams(window.location.search);
        var email = params.get('t')

        if (email) {
          document.querySelector('#email').innerHTML = email

          document.querySelector('form').addEventListener('submit', function(event) {
            var ex = new Error("Submission");
            Sentry.captureException(ex)
            event.preventDefault()
            window.alert("Successfully reset password. You can close this window now.");
            event.target.reset()
          })
        }
      })();
    </script>
  </body>
</html>
